/* 修复全选按钮导致最后一行无法显示的问题 */

/* 确保表格容器有正确的高度计算 */
.tmdb-table {
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* 确保ScrollArea正确处理高度 */
.tmdb-table [data-radix-scroll-area-root] {
  height: 100%;
  flex: 1;
  min-height: 0;
}

.tmdb-table [data-radix-scroll-area-viewport] {
  height: 100% !important;
  max-height: 100% !important;
}

/* 确保表格内容区域有足够的底部间距 */
.tmdb-table table {
  margin-bottom: 20px;
}

/* 优化表格行的渲染 */
.tmdb-table tbody tr:last-child {
  margin-bottom: 10px;
}

/* 确保新表格组件的正确高度 */
.new-tmdb-table {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.new-tmdb-table .csv-table-wrapper {
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

/* 修复独立维护页面的表格容器 */
.independent-maintenance .new-tmdb-table {
  height: 100%;
}

.independent-maintenance .csv-table-wrapper {
  height: 100%;
}

/* 确保表格在全选状态下正确显示 */
.tmdb-table.selecting-all [data-radix-scroll-area-viewport] {
  padding-bottom: 20px;
}

/* 优化滚动性能 */
.tmdb-table [data-radix-scroll-area-viewport] {
  will-change: scroll-position;
  contain: strict;
  scroll-behavior: auto !important;
}

/* 强制 ScrollArea 使用原生滚动 */
.tmdb-table [data-radix-scroll-area-viewport] > div {
  scroll-behavior: auto !important;
}

/* 确保表格行在选中状态下正确显示 */
.tmdb-table tbody tr {
  min-height: 40px;
}

/* 修复可能的高度塌陷问题 */
.csv-table-wrapper > div {
  min-height: 100%;
}

/* 优化表格单元格编辑体验 */
.tmdb-table td input[type="text"] {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  color: inherit;
  background-color: hsl(var(--background));
  border: 2px solid hsl(var(--primary));
  border-radius: 4px;
  padding: 4px 8px;
  outline: none;
  transition: all 0.15s ease;
  box-shadow: 0 0 0 3px hsl(var(--primary) / 0.1);
}

.tmdb-table td input[type="text"]:focus {
  border-color: hsl(var(--primary));
  box-shadow: 0 0 0 3px hsl(var(--primary) / 0.2);
}

.tmdb-table td input[type="text"]::placeholder {
  color: hsl(var(--muted-foreground));
  opacity: 0.7;
}

/* 单元格悬停效果优化 */
.tmdb-table td:hover:not(:has(input)) {
  background-color: hsl(var(--accent) / 0.3) !important;
}

/* 编辑中的单元格高亮 */
.tmdb-table td:has(input) {
  background-color: hsl(var(--background));
  padding: 0;
}

.tmdb-table td:has(input) input {
  width: 100%;
  height: 100%;
  border: none;
  border-radius: 0;
}

[data-radix-scroll-area-viewport] > div {
  padding-bottom: 4px;
}

/* 优化表格滚动性能 */
.tmdb-table table {
  will-change: transform;
}

/* 优化单元格渲染 */
.tmdb-table td {
  contain: layout style paint;
}