# AI分集简介生成器

## 功能概述

基于硅基流动AI模型的智能分集简介生成工具，能够根据字幕文件自动生成精彩的分集标题和剧情简介。

## 主要特性

### 🤖 AI模型支持
- **硅基流动平台**：支持多种先进的AI模型
  - DeepSeek-V2.5：强大的中文理解能力
  - Qwen2.5-72B：阿里通义千问大模型
  - Llama-3.1-70B：Meta开源大模型
  - Yi-1.5-34B：零一万物大模型
  - GLM-4-9B：智谱AI大模型

### 📁 文件格式支持
- **SRT格式**：标准字幕格式，自动解析时间戳和文本
- **VTT格式**：Web视频文本轨道格式
- **ASS/SSA格式**：高级字幕格式（基础支持）

### 🎨 生成风格选择
- **专业风格**：正式、准确的描述风格
- **引人入胜**：吸引观众的生动描述
- **悬疑风格**：营造紧张悬疑氛围
- **情感风格**：注重情感表达和共鸣
- **幽默风格**：轻松幽默的表达方式
- **戏剧化**：强调戏剧冲突和张力

### ⚙️ 智能配置
- **字数控制**：可调节简介字数范围（50-500字）
- **创意温度**：控制AI生成内容的创意程度
- **自定义提示词**：支持个性化生成要求
- **批量处理**：一次性处理多集内容

## 使用流程

### 1. 配置API密钥
1. 点击右上角"设置"按钮
2. 在"API配置"标签页中输入硅基流动API密钥
3. 选择合适的AI模型

### 2. 上传字幕文件
1. 点击"上传字幕文件"按钮
2. 选择SRT、VTT、ASS或SSA格式的字幕文件
3. 系统自动解析并识别分集内容

### 3. 调整生成设置
1. 在"生成设置"中调整简介字数范围
2. 设置创意温度（0.1-1.0）
3. 可选：添加自定义提示词

### 4. 选择生成风格
1. 在"风格设置"中选择一个或多个生成风格
2. 不同风格可以组合使用

### 5. 开始生成
1. 点击"开始生成"按钮
2. 系统将逐集生成标题和简介
3. 显示生成进度和置信度

### 6. 导出结果
1. 生成完成后可点击"导出结果"
2. 支持CSV格式导出
3. 包含标题、简介、字数、置信度等信息

## 技术实现

### 前端架构
- **React + TypeScript**：现代化的前端开发框架
- **Tailwind CSS**：实用优先的CSS框架
- **Radix UI**：无障碍的UI组件库
- **Lucide React**：美观的图标库

### 后端集成
- **Next.js API Routes**：服务端API处理
- **硅基流动API**：AI模型调用接口
- **错误处理**：完善的错误处理和重试机制

### 字幕解析
- **SRT解析**：支持标准SRT格式的时间戳和文本提取
- **VTT解析**：支持WebVTT格式解析
- **智能分集**：自动识别分集标记和内容分割
- **内容清理**：移除HTML标签和格式化字符

### AI提示工程
- **上下文构建**：根据字幕内容构建合适的提示词
- **风格融合**：将多种生成风格融入提示词
- **长度控制**：精确控制生成内容的字数范围
- **质量验证**：对生成结果进行质量检查和优化

## 界面设计

### 布局结构
- **侧边栏集成**：完美融入现有的侧边栏导航
- **标签页支持**：在原始布局中添加"AI工具"标签页
- **响应式设计**：适配桌面和移动设备

### 用户体验
- **拖拽上传**：支持文件拖拽上传
- **实时预览**：文件解析后立即显示分集信息
- **进度指示**：生成过程中显示详细进度
- **结果展示**：美观的卡片式结果展示

### 视觉设计
- **现代化UI**：采用渐变背景和毛玻璃效果
- **一致性**：与现有系统保持视觉一致性
- **可访问性**：支持键盘导航和屏幕阅读器

## 文件结构

```
components/
├── subtitle-episode-generator.tsx    # 主组件
├── sidebar-navigation.tsx           # 侧边栏导航（已更新）
└── sidebar-layout.tsx              # 侧边栏布局（已更新）

app/
├── api/siliconflow/route.ts         # 硅基流动API路由
├── page.tsx                         # 主页面（已更新）
└── ...


```

## API接口

### 硅基流动API调用
```typescript
POST /api/siliconflow
{
  "model": "deepseek-ai/DeepSeek-V2.5",
  "messages": [...],
  "temperature": 0.7,
  "max_tokens": 800,
  "apiKey": "your-api-key"
}
```

### 响应格式
```typescript
{
  "success": true,
  "data": {
    "content": "生成的内容",
    "usage": {...},
    "model": "使用的模型"
  }
}
```

## 错误处理

### API错误
- **401 Unauthorized**：API密钥无效
- **429 Too Many Requests**：请求频率过高
- **500 Internal Server Error**：服务器内部错误

### 文件错误
- **格式不支持**：提示用户使用支持的格式
- **解析失败**：显示具体的错误信息
- **文件过大**：限制文件大小并提示

### 生成错误
- **内容为空**：API返回空内容时的处理
- **格式错误**：JSON解析失败时的降级处理
- **网络错误**：网络连接问题的重试机制

## 性能优化

### 前端优化
- **懒加载**：组件按需加载
- **防抖处理**：避免频繁的API调用
- **缓存机制**：本地缓存生成结果

### 后端优化
- **请求限流**：避免API限流
- **错误重试**：智能重试机制
- **响应缓存**：缓存常用的生成结果

## 安全考虑

### API安全
- **密钥保护**：API密钥仅在客户端存储
- **请求验证**：验证请求参数的合法性
- **错误信息**：避免泄露敏感信息

### 文件安全
- **格式验证**：严格验证上传文件格式
- **大小限制**：限制文件大小防止滥用
- **内容过滤**：过滤恶意内容

## 扩展性

### 模型扩展
- 支持添加更多AI模型
- 支持自定义模型参数
- 支持模型性能对比

### 功能扩展
- 支持更多字幕格式
- 支持批量文件处理
- 支持生成结果的二次编辑

### 集成扩展
- 支持与其他工具的集成
- 支持API接口开放
- 支持插件系统

## 使用建议

### 最佳实践
1. **选择合适的模型**：根据内容类型选择最适合的AI模型
2. **调整生成参数**：根据需求调整字数范围和创意温度
3. **组合使用风格**：多种风格组合可以获得更好的效果
4. **检查生成质量**：关注置信度指标，必要时重新生成

### 常见问题
1. **生成内容不理想**：尝试调整提示词或更换模型
2. **API调用失败**：检查网络连接和API密钥
3. **文件解析错误**：确认文件格式和编码正确
4. **生成速度慢**：避免同时处理过多文件

## 更新日志

### v1.0.0 (2024-01-24)
- ✨ 初始版本发布
- 🤖 支持硅基流动AI模型
- 📁 支持SRT/VTT字幕文件
- 🎨 支持6种生成风格
- ⚙️ 完整的配置系统
- 🎯 批量生成功能
- 📊 结果导出功能
- 🎨 现代化UI设计
- 📱 响应式布局
- 🔧 完善的错误处理

## 技术支持

如有问题或建议，请通过以下方式联系：
- 在项目中创建Issue
- 查看API文档：https://siliconflow.cn

---

*本工具基于硅基流动AI平台开发，为影视内容创作者提供智能化的分集简介生成服务。*